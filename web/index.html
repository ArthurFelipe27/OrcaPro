<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Or√ßamentos</title>
    <!-- ===[ FONTES E ESTILOS ]=== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- ===[ BARRA LATERAL (SIDEBAR) ]=== -->
    <nav class="sidebar">
        <div class="logo">
            <span>‚ö° OrcaPro</span>
        </div>
        <button class="nav-btn active" onclick="navigate('home')">In√≠cio</button>
        <button class="nav-btn" onclick="startNewBudget()">Criar Or√ßamento</button>
        <button class="nav-btn" onclick="navigate('history')">Hist√≥rico</button>
        <button class="nav-btn" onclick="navigate('settings')">Configura√ß√µes</button>
        <button class="nav-btn" onclick="navigate('help')">Ajuda</button>
    </nav>

    <!-- ===[ √ÅREA DE CONTE√öDO PRINCIPAL ]=== -->
    <main class="main-content">

        <!-- ===[ SE√á√ÉO: DASHBOARD INICIAL ]=== -->
        <section id="home" class="section active">
            <h2>Vis√£o Geral do Neg√≥cio</h2>

            <div class="stats-grid">
                <!-- Cart√£o: Aprovados (Verde) -->
                <div class="stat-card border-green">
                    <div class="stat-header">
                        <div class="stat-label">Faturamento (Aprovados)</div>
                        <div class="stat-icon green">üí∞</div>
                    </div>
                    <div class="stat-value green-text" id="stat-approved-value">R$ 0,00</div>
                    <div class="stat-sub">Total de <span id="stat-approved-count">0</span> or√ßamentos</div>
                </div>

                <!-- Cart√£o: Pendentes (Amarelo) -->
                <div class="stat-card border-yellow">
                    <div class="stat-header">
                        <div class="stat-label">Em Aberto (Pendentes)</div>
                        <div class="stat-icon yellow">‚è≥</div>
                    </div>
                    <div class="stat-value yellow-text" id="stat-pending-value">R$ 0,00</div>
                    <div class="stat-sub">Aguardando <span id="stat-pending-count">0</span> respostas</div>
                </div>

                <!-- Cart√£o: Rejeitados (Vermelho) -->
                <div class="stat-card border-red">
                    <div class="stat-header">
                        <div class="stat-label">Perdidos (Rejeitados)</div>
                        <div class="stat-icon red">‚ùå</div>
                    </div>
                    <div class="stat-value red-text" id="stat-rejected-count">0</div>
                    <div class="stat-sub">Or√ßamentos recusados</div>
                </div>

                <!-- Cart√£o: Total (Azul) -->
                <div class="stat-card border-blue">
                    <div class="stat-header">
                        <div class="stat-label">Total Criados</div>
                        <div class="stat-icon blue">üìä</div>
                    </div>
                    <div class="stat-value blue-text" id="stat-total-count">0</div>
                    <div class="stat-sub">Hist√≥rico geral</div>
                </div>
            </div>

            <div style="margin-top: 2rem;">
                <div class="card">
                    <h3>Acesso R√°pido</h3>
                    <p style="color: var(--text-muted); margin: 10px 0;">Atalhos para as fun√ß√µes mais usadas.</p>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="startNewBudget()">+ Novo Or√ßamento</button>
                        <button class="btn btn-secondary" onclick="navigate('history')">üìÇ Ver Hist√≥rico
                            Completo</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===[ SE√á√ÉO: CRIAR NOVO OR√áAMENTO ]=== -->
        <section id="create" class="section">
            <h2 id="form-title">Novo Or√ßamento</h2>
            <div class="card">
                <h3>Dados do Cliente</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nome do Cliente *</label>
                        <input type="text" id="client-name" placeholder="Ex: Jo√£o da Silva">
                    </div>
                    <div class="form-group">
                        <label>Telefone / WhatsApp *</label>
                        <input type="text" id="client-phone" placeholder="(61) 9 9999-9999" maxlength="16">
                    </div>
                    <div class="form-group">
                        <label>E-mail</label>
                        <input type="email" id="client-email" placeholder="cliente@email.com">
                    </div>
                    <div class="form-group">
                        <label>Endere√ßo Completo</label>
                        <input type="text" id="client-address" placeholder="Rua, N√∫mero, Bairro...">
                    </div>
                </div>

                <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid var(--border);">

                <h3>Itens do Servi√ßo</h3>
                <div class="item-input-row">
                    <div style="flex: 3;">
                        <input type="text" id="item-desc" placeholder="Descri√ß√£o do item *">
                        <input type="text" id="item-obs" placeholder="Observa√ß√£o (opcional)"
                            style="font-size: 0.9rem; margin-top: 5px;">
                    </div>
                    <div style="flex: 1;">
                        <input type="number" id="item-qty" placeholder="Qtd" value="1">
                    </div>
                    <div style="flex: 1;">
                        <input type="text" id="item-price" placeholder="Pre√ßo (R$)" oninput="maskMoneyInput(this)">
                    </div>
                    <button id="btn-add-item" class="btn btn-secondary"
                        style="height: fit-content; align-self: flex-start;" onclick="addItem()">Adicionar</button>
                </div>

                <table class="items-table">
                    <thead>
                        <tr>
                            <th style="width: 50%;">Descri√ß√£o</th>
                            <th>Qtd</th>
                            <th>Unit√°rio</th>
                            <th>Total</th>
                            <th>A√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody id="items-list">
                        <!-- Items will appear here -->
                    </tbody>
                </table>

                <div class="total-display" id="total-display">
                    Total: R$ 0,00
                </div>

                <div style="margin-top: 2rem; text-align: right;">
                    <button class="btn btn-primary" onclick="saveBudget()">Salvar Or√ßamento</button>
                </div>
            </div>
        </section>

        <!-- ===[ SE√á√ÉO: HIST√ìRICO ]=== -->
        <section id="history" class="section">
            <h2>Hist√≥rico de Or√ßamentos</h2>
            <div class="card">
                <div id="history-container">
                    <p style="color: var(--text-muted); text-align: center;">Carregando...</p>
                </div>
            </div>
        </section>

        <!-- ===[ SE√á√ÉO: CONFIGURA√á√ïES ]=== -->
        <section id="settings" class="section">
            <h2>Configura√ß√µes</h2>
            <div class="card">

                <!-- Identidade Visual -->
                <h3>Identidade Visual</h3>
                <div class="form-group">
                    <label>Logotipo da Empresa</label>
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <div id="logo-preview-container"
                            style="width: 80px; height: 80px; background: #f3f4f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; border: 1px dashed #ccc; overflow: hidden;">
                            <span id="logo-placeholder" style="font-size: 0.8rem; color: #999;">Sem Logo</span>
                            <img id="logo-preview" src=""
                                style="width: 100%; height: 100%; object-fit: contain; display: none;">
                        </div>
                        <div>
                            <button class="btn btn-secondary" onclick="selectLogo()">üì∏ Escolher Logotipo</button>
                            <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 5px;">Suporta alta
                                resolu√ß√£o (at√© 3300px). Recomendado: Quadrada.</p>
                        </div>
                    </div>
                    <input type="hidden" id="logo-path">
                </div>

                <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid var(--border);">

                <h3>Dados da Empresa</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nome Fantasia (Principal)</label>
                        <input type="text" id="company-name" placeholder="Ex: Minha Loja Tech">
                    </div>
                    <div class="form-group">
                        <label>Raz√£o Social</label>
                        <input type="text" id="company-legal-name" placeholder="Ex: Minha Loja Ltda">
                    </div>
                    <div class="form-group">
                        <label>CNPJ</label>
                        <input type="text" id="company-cnpj" placeholder="00.000.000/0000-00" maxlength="18">
                    </div>
                    <div class="form-group">
                        <label>Telefone da Empresa</label>
                        <input type="text" id="company-phone" placeholder="(00) 0000-0000" maxlength="16">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label>Endere√ßo da Empresa</label>
                        <input type="text" id="company-address" placeholder="Av. Brasil, 1000 - Centro">
                    </div>
                </div>

                <div class="form-group">
                    <label>Rodap√© Padr√£o do Or√ßamento</label>
                    <textarea id="footer-text" rows="2"
                        placeholder="Mensagem de agradecimento ou observa√ß√µes gerais."></textarea>
                </div>

                <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid var(--border);">

                <h3>Formas de Pagamento</h3>
                <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 15px;">Selecione quais op√ß√µes
                    aparecer√£o no PDF.</p>
                <div class="checkbox-group">
                    <label class="checkbox-label"><input type="checkbox" id="pay-pix"> PIX</label>
                    <label class="checkbox-label"><input type="checkbox" id="pay-credit"> Cart√£o de Cr√©dito</label>
                    <label class="checkbox-label"><input type="checkbox" id="pay-debit"> Cart√£o de D√©bito</label>
                    <label class="checkbox-label"><input type="checkbox" id="pay-cash"> Dinheiro</label>
                </div>

                <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid var(--border);">

                <h3>Exporta√ß√£o de PDF</h3>

                <div class="form-group" style="margin-bottom: 1rem;">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="pdf-auto-save" style="width: auto;">
                        <label for="pdf-auto-save" style="margin: 0; cursor: pointer;">Salvar automaticamente ap√≥s
                            gerar?</label>
                    </div>
                    <p style="font-size: 0.8rem; color: var(--text-muted); margin-left: 25px;">Se desmarcado, o arquivo
                        abrir√° apenas para visualiza√ß√£o.</p>
                </div>

                <div class="form-group">
                    <label>Pasta de Salvamento (se autom√°tico)</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="pdf-path" readonly placeholder="Pasta padr√£o do sistema"
                            style="background-color: #f9fafb; cursor: default;">
                        <button class="btn btn-secondary" onclick="selectFolder()">üìÇ Selecionar Pasta</button>
                    </div>
                </div>

                <div class="checkbox-wrapper">
                    <input type="checkbox" id="pdf-subfolder" style="width: auto;">
                    <label for="pdf-subfolder" style="margin: 0; cursor: pointer;">Criar pasta separada para cada
                        cliente?</label>
                </div>

                <div style="margin-top: 2rem;">
                    <button class="btn btn-primary" onclick="saveSettings()">Salvar Configura√ß√µes</button>
                </div>
            </div>
        </section>

        <!-- ===[ SE√á√ÉO: AJUDA ]=== -->
        <section id="help" class="section">
            <h2>Central de Ajuda</h2>
            <div class="help-grid">
                <div class="card help-card">
                    <div class="icon">üñºÔ∏è</div>
                    <h3>Logotipo</h3>
                    <p>Adicione a marca da sua empresa. O sistema aceita imagens e as redimensiona automaticamente para
                        caber no PDF.</p>
                </div>
                <div class="card help-card">
                    <div class="icon">üí≥</div>
                    <h3>Pagamentos</h3>
                    <p>Configure quais formas de pagamento voc√™ aceita (Pix, Cart√£o, Dinheiro) na aba Configura√ß√µes.</p>
                </div>
                <div class="card help-card">
                    <div class="icon">üíæ</div>
                    <h3>Salvamento</h3>
                    <p>Voc√™ pode optar por salvar automaticamente os PDFs em uma pasta ou apenas visualiz√°-los
                        temporariamente.</p>
                </div>
            </div>
        </section>

    </main>

    <!-- ===[ SCRIPTS DO SISTEMA ]=== -->
    <script src="script.js"></script>
</body>

</html>
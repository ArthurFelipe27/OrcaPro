<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Or√ßamentos</title>
    <!-- ===[ FONTES E ESTILOS ]=== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- ===[ BARRA LATERAL (SIDEBAR) ]=== -->
    <nav class="barra-lateral">
        <div class="logo">
            <span>‚ö° OrcaPro</span>
        </div>
        <button class="btn-nav ativo" onclick="navegar('inicio')">In√≠cio</button>
        <button class="btn-nav" onclick="iniciarNovoOrcamento()">Criar Or√ßamento</button>
        <button class="btn-nav" onclick="navegar('historico')">Hist√≥rico</button>
        <button class="btn-nav" onclick="navegar('configuracoes')">Configura√ß√µes</button>
        <button class="btn-nav" onclick="navegar('ajuda')">Ajuda</button>
    </nav>

    <!-- ===[ √ÅREA DE CONTE√öDO PRINCIPAL ]=== -->
    <main class="conteudo-principal">

        <!-- ===[ SE√á√ÉO: DASHBOARD INICIAL ]=== -->
        <section id="inicio" class="secao ativa">
            <h2>Vis√£o Geral do Neg√≥cio</h2>

            <div class="grade-estatisticas">
                <!-- Cart√£o: Aprovados (Verde) -->
                <div class="cartao-stat borda-verde">
                    <div class="stat-cabecalho">
                        <div class="stat-rotulo">Faturamento (Aprovados)</div>
                        <div class="stat-icone verde">üí∞</div>
                    </div>
                    <div class="stat-valor texto-verde" id="stat-aprovado-valor">R$ 0,00</div>
                    <div class="stat-sub">Total de <span id="stat-aprovado-qtd">0</span> or√ßamentos</div>
                </div>

                <!-- Cart√£o: Pendentes (Amarelo) -->
                <div class="cartao-stat borda-amarela">
                    <div class="stat-cabecalho">
                        <div class="stat-rotulo">Em Aberto (Pendentes)</div>
                        <div class="stat-icone amarelo">‚è≥</div>
                    </div>
                    <div class="stat-valor texto-amarelo" id="stat-pendente-valor">R$ 0,00</div>
                    <div class="stat-sub">Aguardando <span id="stat-pendente-qtd">0</span> respostas</div>
                </div>

                <!-- Cart√£o: Rejeitados (Vermelho) -->
                <div class="cartao-stat borda-vermelha">
                    <div class="stat-cabecalho">
                        <div class="stat-rotulo">Perdidos (Rejeitados)</div>
                        <div class="stat-icone vermelho">‚ùå</div>
                    </div>
                    <div class="stat-valor texto-vermelho" id="stat-rejeitado-qtd">0</div>
                    <div class="stat-sub">Or√ßamentos recusados</div>
                </div>

                <!-- Cart√£o: Total (Azul) -->
                <div class="cartao-stat borda-azul">
                    <div class="stat-cabecalho">
                        <div class="stat-rotulo">Total Criados</div>
                        <div class="stat-icone azul">üìä</div>
                    </div>
                    <div class="stat-valor texto-azul" id="stat-total-geral">0</div>
                    <div class="stat-sub">Hist√≥rico geral</div>
                </div>
            </div>

            <div style="margin-top: 2rem;">
                <div class="cartao">
                    <h3>Acesso R√°pido</h3>
                    <p style="color: var(--texto-suave); margin: 10px 0;">Atalhos para as fun√ß√µes mais usadas.</p>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primario" onclick="iniciarNovoOrcamento()">+ Novo Or√ßamento</button>
                        <button class="btn btn-secundario" onclick="navegar('historico')">üìÇ Ver Hist√≥rico
                            Completo</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===[ SE√á√ÉO: CRIAR NOVO OR√áAMENTO ]=== -->
        <section id="criar" class="secao">
            <h2 id="titulo-formulario">Novo Or√ßamento</h2>
            <div class="cartao">
                <h3>Dados do Cliente</h3>
                <div class="grupo-formulario-grid">
                    <div class="grupo-input">
                        <label>Nome do Cliente *</label>
                        <input type="text" id="cliente-nome" placeholder="Ex: Jo√£o da Silva">
                    </div>
                    <div class="grupo-input">
                        <label>Telefone / WhatsApp *</label>
                        <input type="text" id="cliente-telefone" placeholder="(61) 9 9999-9999" maxlength="16">
                    </div>
                    <div class="grupo-input">
                        <label>E-mail</label>
                        <input type="email" id="cliente-email" placeholder="cliente@email.com">
                    </div>
                    <div class="grupo-input">
                        <label>Endere√ßo Completo</label>
                        <input type="text" id="cliente-endereco" placeholder="Rua, N√∫mero, Bairro...">
                    </div>
                </div>

                <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid var(--borda);">

                <h3>Itens do Servi√ßo</h3>
                <div class="linha-input-item">
                    <div style="flex: 3;">
                        <input type="text" id="item-desc" placeholder="Descri√ß√£o do item *">
                        <input type="text" id="item-obs" placeholder="Observa√ß√£o (opcional)"
                            style="font-size: 0.9rem; margin-top: 5px;">
                    </div>
                    <div style="flex: 1;">
                        <input type="number" id="item-qtd" placeholder="Qtd" value="1">
                    </div>
                    <div style="flex: 1;">
                        <input type="text" id="item-preco" placeholder="Pre√ßo (R$)" oninput="mascaraMoedaInput(this)">
                    </div>
                    <button id="btn-adicionar-item" class="btn btn-secundario"
                        style="height: fit-content; align-self: flex-start;"
                        onclick="adicionarItem()">Adicionar</button>
                </div>

                <table class="tabela-itens">
                    <thead>
                        <tr>
                            <th style="width: 50%;">Descri√ß√£o</th>
                            <th>Qtd</th>
                            <th>Unit√°rio</th>
                            <th>Total</th>
                            <th>A√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody id="lista-itens">
                        <!-- Itens aparecem aqui -->
                    </tbody>
                </table>

                <div class="display-total" id="display-total">
                    Total: R$ 0,00
                </div>

                <div style="margin-top: 2rem; text-align: right;">
                    <button class="btn btn-primario" onclick="salvarOrcamento()">Salvar Or√ßamento</button>
                </div>
            </div>
        </section>

        <!-- ===[ SE√á√ÉO: HIST√ìRICO ]=== -->
        <section id="historico" class="secao">
            <h2>Hist√≥rico de Or√ßamentos</h2>
            <div class="cartao">
                <div id="container-historico">
                    <p style="color: var(--texto-suave); text-align: center;">Carregando...</p>
                </div>
            </div>
        </section>

        <!-- ===[ SE√á√ÉO: CONFIGURA√á√ïES ]=== -->
        <section id="configuracoes" class="secao">
            <h2>Configura√ß√µes</h2>
            <div class="cartao">

                <!-- Identidade Visual -->
                <h3>Identidade Visual</h3>
                <div class="grupo-input">
                    <label>Logotipo da Empresa</label>
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <div id="container-logo"
                            style="width: 80px; height: 80px; background: #f3f4f6; border-radius: 8px; display: flex; align-items: center; justify-content: center; border: 1px dashed #ccc; overflow: hidden;">
                            <span id="logo-placeholder" style="font-size: 0.8rem; color: #999;">Sem Logo</span>
                            <img id="logo-preview" src=""
                                style="width: 100%; height: 100%; object-fit: contain; display: none;">
                        </div>
                        <div>
                            <button class="btn btn-secundario" onclick="selecionarLogo()">üì∏ Escolher Logotipo</button>
                            <p style="font-size: 0.8rem; color: var(--texto-suave); margin-top: 5px;">Suporta alta
                                resolu√ß√£o. Recomendado: Quadrada.</p>
                        </div>
                    </div>
                    <input type="hidden" id="caminho-logo">
                </div>

                <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid var(--borda);">

                <h3>Dados da Empresa</h3>
                <div class="grupo-formulario-grid">
                    <div class="grupo-input">
                        <label>Nome Fantasia (Principal)</label>
                        <input type="text" id="empresa-nome" placeholder="Ex: Minha Loja Tech">
                    </div>
                    <div class="grupo-input">
                        <label>Raz√£o Social</label>
                        <input type="text" id="empresa-razao-social" placeholder="Ex: Minha Loja Ltda">
                    </div>
                    <div class="grupo-input">
                        <label>CNPJ</label>
                        <input type="text" id="empresa-cnpj" placeholder="00.000.000/0000-00" maxlength="18">
                    </div>
                    <div class="grupo-input">
                        <label>Telefone da Empresa</label>
                        <input type="text" id="empresa-telefone" placeholder="(00) 0000-0000" maxlength="16">
                    </div>
                    <div class="grupo-input" style="grid-column: span 2;">
                        <label>Endere√ßo da Empresa</label>
                        <input type="text" id="empresa-endereco" placeholder="Av. Brasil, 1000 - Centro">
                    </div>
                </div>

                <div class="grupo-input">
                    <label>Rodap√© Padr√£o do Or√ßamento</label>
                    <textarea id="texto-rodape" rows="2"
                        placeholder="Mensagem de agradecimento ou observa√ß√µes gerais."></textarea>
                </div>

                <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid var(--borda);">

                <h3>Formas de Pagamento</h3>
                <p style="color: var(--texto-suave); font-size: 0.9rem; margin-bottom: 15px;">Selecione quais op√ß√µes
                    aparecer√£o no PDF.</p>
                <div class="grupo-checkbox">
                    <label class="rotulo-checkbox"><input type="checkbox" id="pag-pix"> PIX</label>
                    <label class="rotulo-checkbox"><input type="checkbox" id="pag-credito"> Cart√£o de Cr√©dito</label>
                    <label class="rotulo-checkbox"><input type="checkbox" id="pag-debito"> Cart√£o de D√©bito</label>
                    <label class="rotulo-checkbox"><input type="checkbox" id="pag-dinheiro"> Dinheiro</label>
                </div>

                <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid var(--borda);">

                <h3>Exporta√ß√£o de PDF</h3>

                <div class="grupo-input" style="margin-bottom: 1rem;">
                    <div class="wrapper-checkbox">
                        <input type="checkbox" id="pdf-salvar-auto" style="width: auto;">
                        <label for="pdf-salvar-auto" style="margin: 0; cursor: pointer;">Salvar automaticamente ap√≥s
                            gerar?</label>
                    </div>
                    <p style="font-size: 0.8rem; color: var(--texto-suave); margin-left: 25px;">Se desmarcado, o arquivo
                        abrir√° apenas para visualiza√ß√£o.</p>
                </div>

                <div class="grupo-input">
                    <label>Pasta de Salvamento (se autom√°tico)</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="caminho-pdf" readonly placeholder="Pasta padr√£o do sistema"
                            style="background-color: #f9fafb; cursor: default;">
                        <button class="btn btn-secundario" onclick="selecionarPasta()">üìÇ Selecionar Pasta</button>
                    </div>
                </div>

                <div class="wrapper-checkbox">
                    <input type="checkbox" id="pdf-subpasta" style="width: auto;">
                    <label for="pdf-subpasta" style="margin: 0; cursor: pointer;">Criar pasta separada para cada
                        cliente?</label>
                </div>

                <div style="margin-top: 2rem;">
                    <button class="btn btn-primario" onclick="salvarConfiguracoes()">Salvar Configura√ß√µes</button>
                </div>
            </div>
        </section>

        <!-- ===[ SE√á√ÉO: AJUDA ]=== -->
        <section id="ajuda" class="secao">
            <h2>Central de Ajuda</h2>
            <div class="grade-ajuda">
                <div class="cartao cartao-ajuda">
                    <div class="icone">üñºÔ∏è</div>
                    <h3>Logotipo</h3>
                    <p>Adicione a marca da sua empresa. O sistema aceita imagens e as redimensiona automaticamente para
                        caber no PDF.</p>
                </div>
                <div class="cartao cartao-ajuda">
                    <div class="icone">üí≥</div>
                    <h3>Pagamentos</h3>
                    <p>Configure quais formas de pagamento voc√™ aceita (Pix, Cart√£o, Dinheiro) na aba Configura√ß√µes.</p>
                </div>
                <div class="cartao cartao-ajuda">
                    <div class="icone">üíæ</div>
                    <h3>Salvamento</h3>
                    <p>Voc√™ pode optar por salvar automaticamente os PDFs em uma pasta ou apenas visualiz√°-los
                        temporariamente.</p>
                </div>
            </div>
        </section>

    </main>

    <!-- ===[ SCRIPTS DO SISTEMA ]=== -->
    <script src="script.js"></script>
</body>

</html>